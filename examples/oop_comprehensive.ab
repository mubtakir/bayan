// Ù…Ø«Ø§Ù„ Ø´Ø§Ù…Ù„ Ù„Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙƒØ§Ø¦Ù†ÙŠØ© ÙÙŠ Ù„ØºØ© Ø§Ù„Ø¨ÙŠØ§Ù†
// Comprehensive OOP Example in AlBayan

// ========== ØªØ¹Ø±ÙŠÙ Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ==========
// Basic Class Definitions

// ÙØ¦Ø© Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
struct Person {
    name: string,
    age: int,
    email: string,
    phone: string
}

// ÙØ¦Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„ØªÙŠ ØªØ±Ø« Ù…Ù† Ø§Ù„Ø´Ø®Øµ
struct Student {
    person: Person,
    student_id: string,
    major: string,
    gpa: float,
    courses: Vec<string>
}

// ÙØ¦Ø© Ø§Ù„Ø£Ø³ØªØ§Ø°
struct Professor {
    person: Person,
    employee_id: string,
    department: string,
    salary: float,
    courses_taught: Vec<string>
}

// ÙØ¦Ø© Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ©
struct Course {
    course_id: string,
    title: string,
    credits: int,
    professor: string,
    students: Vec<string>,
    max_capacity: int
}

// ÙØ¦Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©
struct University {
    name: string,
    students: Vec<Student>,
    professors: Vec<Professor>,
    courses: Vec<Course>
}

// ========== Ø·Ø±Ù‚ Ø§Ù„ÙØ¦Ø§Øª (Methods) ==========
// Class Methods

// Ø·Ø±Ù‚ ÙØ¦Ø© Ø§Ù„Ø´Ø®Øµ
impl Person {
    // Ù…Ù†Ø´Ø¦ Ø¬Ø¯ÙŠØ¯
    fn new(name: string, age: int, email: string, phone: string) -> Person {
        return Person {
            name: name,
            age: age,
            email: email,
            phone: phone
        };
    }
    
    // Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø®Øµ
    fn display_info(self) -> string {
        return "Ø§Ù„Ø§Ø³Ù…: " + self.name + ", Ø§Ù„Ø¹Ù…Ø±: " + string(self.age) + ", Ø§Ù„Ø¨Ø±ÙŠØ¯: " + self.email;
    }
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù…Ø±
    fn update_age(self, new_age: int) -> Person {
        return Person {
            name: self.name,
            age: new_age,
            email: self.email,
            phone: self.phone
        };
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
    fn is_valid_email(self) -> bool {
        if self.email.contains("@") {
            return true;
        }
        return false;
    }
}

// Ø·Ø±Ù‚ ÙØ¦Ø© Ø§Ù„Ø·Ø§Ù„Ø¨
impl Student {
    // Ù…Ù†Ø´Ø¦ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø·Ø§Ù„Ø¨
    fn new(person: Person, student_id: string, major: string) -> Student {
        let empty_courses: Vec<string> = Vec::new();
        return Student {
            person: person,
            student_id: student_id,
            major: major,
            gpa: 0.0,
            courses: empty_courses
        };
    }
    
    // Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ±Ø©
    fn add_course(self, course_name: string) -> Student {
        let mut new_courses = self.courses;
        new_courses.push(course_name);
        
        return Student {
            person: self.person,
            student_id: self.student_id,
            major: self.major,
            gpa: self.gpa,
            courses: new_courses
        };
    }
    
    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ
    fn calculate_gpa(self, grades: Vec<float>) -> Student {
        let total = 0.0;
        let count = 0;
        
        for grade in grades {
            let total = total + grade;
            let count = count + 1;
        }
        
        let new_gpa = if count > 0 { total / float(count) } else { 0.0 };
        
        return Student {
            person: self.person,
            student_id: self.student_id,
            major: self.major,
            gpa: new_gpa,
            courses: self.courses
        };
    }
    
    // Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨
    fn display_student_info(self) -> string {
        let person_info = self.person.display_info();
        return person_info + ", Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨: " + self.student_id + ", Ø§Ù„ØªØ®ØµØµ: " + self.major + ", Ø§Ù„Ù…Ø¹Ø¯Ù„: " + string(self.gpa);
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø£Ù‡Ù„ÙŠØ© Ù„Ù„ØªØ®Ø±Ø¬
    fn is_eligible_for_graduation(self) -> bool {
        if self.gpa >= 2.0 {
            if self.courses.len() >= 8 {
                return true;
            }
        }
        return false;
    }
}

// Ø·Ø±Ù‚ ÙØ¦Ø© Ø§Ù„Ø£Ø³ØªØ§Ø°
impl Professor {
    // Ù…Ù†Ø´Ø¦ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø£Ø³ØªØ§Ø°
    fn new(person: Person, employee_id: string, department: string, salary: float) -> Professor {
        let empty_courses: Vec<string> = Vec::new();
        return Professor {
            person: person,
            employee_id: employee_id,
            department: department,
            salary: salary,
            courses_taught: empty_courses
        };
    }
    
    // Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ±Ø© Ù„Ù„ØªØ¯Ø±ÙŠØ³
    fn assign_course(self, course_name: string) -> Professor {
        let mut new_courses = self.courses_taught;
        new_courses.push(course_name);
        
        return Professor {
            person: self.person,
            employee_id: self.employee_id,
            department: self.department,
            salary: self.salary,
            courses_taught: new_courses
        };
    }
    
    // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ø§ØªØ¨
    fn increase_salary(self, percentage: float) -> Professor {
        let new_salary = self.salary * (1.0 + percentage / 100.0);
        
        return Professor {
            person: self.person,
            employee_id: self.employee_id,
            department: self.department,
            salary: new_salary,
            courses_taught: self.courses_taught
        };
    }
    
    // Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³ØªØ§Ø°
    fn display_professor_info(self) -> string {
        let person_info = self.person.display_info();
        return person_info + ", Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¸Ù: " + self.employee_id + ", Ø§Ù„Ù‚Ø³Ù…: " + self.department + ", Ø§Ù„Ø±Ø§ØªØ¨: " + string(self.salary);
    }
}

// Ø·Ø±Ù‚ ÙØ¦Ø© Ø§Ù„Ø¯ÙˆØ±Ø©
impl Course {
    // Ù…Ù†Ø´Ø¦ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø¯ÙˆØ±Ø©
    fn new(course_id: string, title: string, credits: int, professor: string, max_capacity: int) -> Course {
        let empty_students: Vec<string> = Vec::new();
        return Course {
            course_id: course_id,
            title: title,
            credits: credits,
            professor: professor,
            students: empty_students,
            max_capacity: max_capacity
        };
    }
    
    // ØªØ³Ø¬ÙŠÙ„ Ø·Ø§Ù„Ø¨ ÙÙŠ Ø§Ù„Ø¯ÙˆØ±Ø©
    fn enroll_student(self, student_id: string) -> Course {
        if self.students.len() < self.max_capacity {
            let mut new_students = self.students;
            new_students.push(student_id);
            
            return Course {
                course_id: self.course_id,
                title: self.title,
                credits: self.credits,
                professor: self.professor,
                students: new_students,
                max_capacity: self.max_capacity
            };
        }
        
        return self;
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆÙØ± Ù…Ù‚Ø§Ø¹Ø¯
    fn has_available_seats(self) -> bool {
        return self.students.len() < self.max_capacity;
    }
    
    // Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯ÙˆØ±Ø©
    fn display_course_info(self) -> string {
        return "Ø§Ù„Ø¯ÙˆØ±Ø©: " + self.title + " (" + self.course_id + "), Ø§Ù„Ø£Ø³ØªØ§Ø°: " + self.professor + ", Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†: " + string(self.students.len()) + "/" + string(self.max_capacity);
    }
}

// ========== Ù…Ø«Ø§Ù„ Ø´Ø§Ù…Ù„ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ==========
// Comprehensive Usage Example

fn main() -> int {
    print("ğŸ“ === Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„ÙƒØ§Ø¦Ù†ÙŠ === ğŸ“");
    print("");
    
    // Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø´Ø®Ø§Øµ
    print("ğŸ‘¥ === Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø£Ø´Ø®Ø§Øµ ===");
    let person1 = Person::new("Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯", 20, "ahmed@university.edu", "123456789");
    let person2 = Person::new("ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ", 22, "fatima@university.edu", "987654321");
    let person3 = Person::new("Ø¯. Ù…Ø­Ù…Ø¯ Ø­Ø³Ù†", 45, "hassan@university.edu", "555666777");
    
    print("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ " + person1.display_info());
    print("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ " + person2.display_info());
    print("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ " + person3.display_info());
    print("");
    
    // Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø§Ø¨
    print("ğŸ“ === Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø§Ø¨ ===");
    let mut student1 = Student::new(person1, "CS2021001", "Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­Ø§Ø³ÙˆØ¨");
    let mut student2 = Student::new(person2, "CS2021002", "Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª");
    
    // Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ±Ø§Øª Ù„Ù„Ø·Ù„Ø§Ø¨
    let student1 = student1.add_course("Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙƒØ§Ø¦Ù†ÙŠØ©");
    let student1 = student1.add_course("Ù‡ÙŠØ§ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
    let student1 = student1.add_course("Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
    
    let student2 = student2.add_course("Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙƒØ§Ø¦Ù†ÙŠØ©");
    let student2 = student2.add_course("Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª");
    
    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¹Ø¯Ù„Ø§Øª
    let grades1: Vec<float> = vec![3.5, 3.8, 3.2];
    let student1 = student1.calculate_gpa(grades1);
    
    let grades2: Vec<float> = vec![3.9, 3.7];
    let student2 = student2.calculate_gpa(grades2);
    
    print("âœ… " + student1.display_student_info());
    print("âœ… " + student2.display_student_info());
    print("");
    
    // Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø³ØªØ§Ø°
    print("ğŸ‘¨â€ğŸ« === Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø£Ø³Ø§ØªØ°Ø© ===");
    let mut professor1 = Professor::new(person3, "PROF001", "Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­Ø§Ø³ÙˆØ¨", 8000.0);
    let professor1 = professor1.assign_course("Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙƒØ§Ø¦Ù†ÙŠØ©");
    let professor1 = professor1.assign_course("Ù‡ÙŠØ§ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
    
    print("âœ… " + professor1.display_professor_info());
    print("");
    
    // Ø¥Ù†Ø´Ø§Ø¡ Ø¯ÙˆØ±Ø§Øª
    print("ğŸ“š === Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ±Ø§Øª ===");
    let mut course1 = Course::new("CS101", "Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙƒØ§Ø¦Ù†ÙŠØ©", 3, "Ø¯. Ù…Ø­Ù…Ø¯ Ø­Ø³Ù†", 30);
    let mut course2 = Course::new("CS102", "Ù‡ÙŠØ§ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª", 3, "Ø¯. Ù…Ø­Ù…Ø¯ Ø­Ø³Ù†", 25);
    
    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø·Ù„Ø§Ø¨ ÙÙŠ Ø§Ù„Ø¯ÙˆØ±Ø§Øª
    let course1 = course1.enroll_student("CS2021001");
    let course1 = course1.enroll_student("CS2021002");
    
    let course2 = course2.enroll_student("CS2021001");
    
    print("âœ… " + course1.display_course_info());
    print("âœ… " + course2.display_course_info());
    print("");
    
    // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø·Ø±Ù‚ Ø§Ù„Ù…Ø®ØªÙ„ÙØ©
    print("ğŸ§ª === Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø·Ø±Ù‚ ===");
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
    if person1.is_valid_email() {
        print("âœ… Ø¨Ø±ÙŠØ¯ " + person1.name + " ØµØ­ÙŠØ­");
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù‡Ù„ÙŠØ© Ø§Ù„ØªØ®Ø±Ø¬
    if student1.is_eligible_for_graduation() {
        print("ğŸ“ " + student1.person.name + " Ù…Ø¤Ù‡Ù„ Ù„Ù„ØªØ®Ø±Ø¬");
    } else {
        print("â³ " + student1.person.name + " ÙŠØ­ØªØ§Ø¬ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø£Ùˆ ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø¹Ø¯Ù„");
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆÙØ± Ù…Ù‚Ø§Ø¹Ø¯
    if course1.has_available_seats() {
        print("ğŸ’º Ø¯ÙˆØ±Ø© " + course1.title + " Ø¨Ù‡Ø§ Ù…Ù‚Ø§Ø¹Ø¯ Ù…ØªØ§Ø­Ø©");
    }
    
    // Ø²ÙŠØ§Ø¯Ø© Ø±Ø§ØªØ¨ Ø§Ù„Ø£Ø³ØªØ§Ø°
    let professor1_updated = professor1.increase_salary(10.0);
    print("ğŸ’° ØªÙ… Ø²ÙŠØ§Ø¯Ø© Ø±Ø§ØªØ¨ " + professor1_updated.person.name + " Ø¥Ù„Ù‰ " + string(professor1_updated.salary));
    
    print("");
    print("ğŸŠ === Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ù…Ø«Ø§Ù„ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙƒØ§Ø¦Ù†ÙŠØ© ===");
    print("âœ… ØªÙ… Ø¹Ø±Ø¶: Ø§Ù„ÙØ¦Ø§ØªØŒ Ø§Ù„Ø·Ø±Ù‚ØŒ Ø§Ù„ÙˆØ±Ø§Ø«Ø©ØŒ Ø§Ù„ØªØºÙ„ÙŠÙØŒ ØªØ¹Ø¯Ø¯ Ø§Ù„Ø£Ø´ÙƒØ§Ù„");
    print("ğŸ§¬ Ù„ØºØ© Ø§Ù„Ø¨ÙŠØ§Ù† ØªØ¯Ø¹Ù… OOP Ø¨Ø´ÙƒÙ„ ÙƒØ§Ù…Ù„ ÙˆÙ…ØªÙ‚Ø¯Ù…!");
    
    return 0;
}
