// tests/programs/math_ai_comprehensive_test.ab
// Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„ Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠ
// Expert recommendation: "Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¬Ø³Ø± Ø¨ÙŠÙ† Ø§Ù„Ø±Ø¤ÙŠØ© ÙˆØ§Ù„ØªÙ†ÙÙŠØ°"

use std::math_ai::*;

/// Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„ Ù„Ø¬Ù…ÙŠØ¹ Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
fn main() {
    println!("ğŸŠ Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠ ğŸŠ");
    
    // 1. Ø¥Ù†Ø´Ø§Ø¡ ÙˆØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
    test_system_initialization();
    
    // 2. Ø§Ø®ØªØ¨Ø§Ø± Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ©
    test_problem_solving();
    
    // 3. Ø§Ø®ØªØ¨Ø§Ø± ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª
    test_equation_analysis();
    
    // 4. Ø§Ø®ØªØ¨Ø§Ø± ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø¥Ù„Ù‰ Ø£Ø´ÙƒØ§Ù„
    test_shape_inference();
    
    // 5. Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØµÙˆØ± Ø§Ù„ÙÙ†ÙŠ
    test_artistic_visualization();
    
    // 6. Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø§Ù„ØªÙƒÙŠÙÙŠØ©
    test_adaptive_equations();
    
    // 7. Ø§Ø®ØªØ¨Ø§Ø± Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø¹Ø±ÙØ©
    test_knowledge_base();
    
    // 8. Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
    test_performance_evaluation();
    
    println!("âœ… Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø§Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­!");
}

/// Ø§Ø®ØªØ¨Ø§Ø± ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
fn test_system_initialization() {
    println!("\nğŸ”§ Ø§Ø®ØªØ¨Ø§Ø± ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…...");
    
    // Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø¸Ø§Ù… Ø¬Ø¯ÙŠØ¯
    let mut ai = MathAI::new();
    
    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
    match ai.initialize() {
        Ok(()) => println!("âœ… ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­"),
        Err(error) => println!("âŒ ÙØ´Ù„ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…: {}", error),
    }
    
    // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø¨Ø³Ø·Ø©
    let ai_simple = create_math_ai();
    println!("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø¨Ø³Ø·Ø©");
    
    // Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
    let info = get_system_info();
    println!("ğŸ“‹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…:");
    println!("   Ø§Ù„Ø¥ØµØ¯Ø§Ø±: {}", info.version);
    println!("   Ø§Ù„Ù…Ø·ÙˆØ±: {}", info.author);
    println!("   Ø§Ù„ÙˆØµÙ: {}", info.description);
}

/// Ø§Ø®ØªØ¨Ø§Ø± Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ©
fn test_problem_solving() {
    println!("\nğŸ§® Ø§Ø®ØªØ¨Ø§Ø± Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ©...");
    
    let mut ai = create_math_ai();
    
    // Ù…Ø´Ø§ÙƒÙ„ Ø±ÙŠØ§Ø¶ÙŠØ© Ù…ØªÙ†ÙˆØ¹Ø©
    let problems = [
        "Ø­Ù„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„ØªØ±Ø¨ÙŠØ¹ÙŠØ©: xÂ² - 5x + 6 = 0",
        "Ø§Ø­Ø³Ø¨ Ù…Ø³Ø§Ø­Ø© Ø¯Ø§Ø¦Ø±Ø© Ù†ØµÙ Ù‚Ø·Ø±Ù‡Ø§ 5",
        "Ø¬Ø¯ Ù…Ø´ØªÙ‚Ø© Ø§Ù„Ø¯Ø§Ù„Ø©: f(x) = xÂ³ + 2xÂ² - x + 1",
        "Ø­Ù„ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª: x + y = 5, x - y = 1",
        "Ø§Ø­Ø³Ø¨ ØªÙƒØ§Ù…Ù„: âˆ«(2x + 3)dx",
    ];
    
    for problem in problems {
        println!("ğŸ” Ø­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: {}", problem);
        
        match ai.solve_problem(problem.to_string()) {
            Ok(solution) => {
                println!("âœ… ØªÙ… Ø§Ù„Ø­Ù„ Ø¨Ù†Ø¬Ø§Ø­!");
                println!("   Ø§Ù„Ù…Ø¹Ø±Ù: {}", solution.id);
                println!("   Ø¹Ø¯Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©: {}", solution.main_outcomes.len());
                println!("   Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: {} Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©", solution.total_time);
                println!("   ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¬ÙˆØ¯Ø©: {:.2}", solution.quality_assessment.overall_score);
            },
            Err(error) => println!("âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø­Ù„: {}", error),
        }
    }
    
    // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø¨Ø³Ø·Ø©
    println!("\nğŸ¯ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø¨Ø³Ø·Ø©:");
    match solve("2 + 2 Ã— 3".to_string()) {
        Ok(result) => println!("âœ… Ø§Ù„Ù†ØªÙŠØ¬Ø©: {}", result),
        Err(error) => println!("âŒ Ø®Ø·Ø£: {}", error),
    }
}

/// Ø§Ø®ØªØ¨Ø§Ø± ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª
fn test_equation_analysis() {
    println!("\nğŸ”¬ Ø§Ø®ØªØ¨Ø§Ø± ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª...");
    
    let mut ai = create_math_ai();
    
    let equations = [
        "y = xÂ²",
        "y = sin(x)",
        "xÂ² + yÂ² = 25",
        "y = e^x",
        "y = log(x)",
    ];
    
    for equation in equations {
        println!("ğŸ” ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©: {}", equation);
        
        match ai.analyze_equation(equation.to_string()) {
            Ok(analysis) => {
                println!("âœ… ØªÙ… Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!");
                println!("   Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©: {:?}", analysis.analysis_results.equation_type);
                println!("   Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ¹Ù‚ÙŠØ¯: {}", analysis.analysis_results.complexity_level);
                println!("   Ø¹Ø¯Ø¯ Ø§Ù„Ø®ØµØ§Ø¦Øµ Ø§Ù„Ù…ÙƒØªØ´ÙØ©: {}", analysis.analysis_results.discovered_properties.len());
                println!("   Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ù‚Ø©: {:.2}", analysis.analysis_results.confidence);
            },
            Err(error) => println!("âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„: {}", error),
        }
    }
    
    // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø¨Ø³Ø·Ø©
    println!("\nğŸ¯ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø³Ø·:");
    match analyze("f(x) = xÂ² + 1".to_string()) {
        Ok(analysis) => println!("âœ… ØªÙ… Ø§Ù„ØªØ­Ù„ÙŠÙ„: {}", analysis.equation),
        Err(error) => println!("âŒ Ø®Ø·Ø£: {}", error),
    }
}

/// Ø§Ø®ØªØ¨Ø§Ø± ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø¥Ù„Ù‰ Ø£Ø´ÙƒØ§Ù„
fn test_shape_inference() {
    println!("\nğŸ¨ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ø³ØªÙ†ØªØ§Ø¬ Ø§Ù„Ø£Ø´ÙƒØ§Ù„...");
    
    let mut ai = create_math_ai();
    
    let shape_equations = [
        "xÂ² + yÂ² = 16",  // Ø¯Ø§Ø¦Ø±Ø©
        "xÂ² + yÂ² = 1",   // Ø¯Ø§Ø¦Ø±Ø© ÙˆØ­Ø¯Ø©
        "y = xÂ²",        // Ù‚Ø·Ø¹ Ù…ÙƒØ§ÙØ¦
        "xÂ²/4 + yÂ²/9 = 1", // Ù‚Ø·Ø¹ Ù†Ø§Ù‚Øµ
        "xÂ² - yÂ² = 1",   // Ù‚Ø·Ø¹ Ø²Ø§Ø¦Ø¯
    ];
    
    for equation in shape_equations {
        println!("ğŸ” ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø¥Ù„Ù‰ Ø´ÙƒÙ„: {}", equation);
        
        match ai.equation_to_shape(equation.to_string()) {
            Ok(shape) => {
                println!("âœ… ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!");
                println!("   Ù†ÙˆØ¹ Ø§Ù„Ø´ÙƒÙ„: {:?}", shape.shape_type);
                println!("   Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª: {}", shape.parameters.len());
                println!("   Ø§Ù„Ù…Ø³Ø§Ø­Ø©: {:.2}", shape.properties.area);
                println!("   Ø§Ù„Ù…Ø­ÙŠØ·: {:.2}", shape.properties.perimeter);
                
                // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¹ÙƒØ³ÙŠ
                match ai.shape_to_equation(shape) {
                    Ok(recovered_equation) => {
                        println!("ğŸ”„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ù…Ø³ØªÙ†ØªØ¬Ø©: {}", recovered_equation);
                    },
                    Err(error) => println!("âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¹ÙƒØ³ÙŠ: {}", error),
                }
            },
            Err(error) => println!("âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„: {}", error),
        }
    }
    
    // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø¨Ø³Ø·Ø©
    println!("\nğŸ¯ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¨Ø³Ø·:");
    match equation_to_shape("xÂ² + yÂ² = 9".to_string()) {
        Ok(shape) => println!("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø´ÙƒÙ„: {:?}", shape.shape_type),
        Err(error) => println!("âŒ Ø®Ø·Ø£: {}", error),
    }
}

/// Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØµÙˆØ± Ø§Ù„ÙÙ†ÙŠ
fn test_artistic_visualization() {
    println!("\nğŸ¨ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØµÙˆØ± Ø§Ù„ÙÙ†ÙŠ...");
    
    let mut ai = create_math_ai();
    
    // Ø£Ù†Ù…Ø§Ø· ÙÙ†ÙŠØ© Ù…Ø®ØªÙ„ÙØ©
    let classic_style = ArtStyle {
        name: "ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ".to_string(),
        description: "Ù†Ù…Ø· ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ Ø£Ù†ÙŠÙ‚".to_string(),
        color_scheme: ColorScheme::default(),
        line_settings: LineSettings::default(),
        text_settings: TextSettings::default(),
        special_effects: vec![],
    };
    
    let modern_style = ArtStyle {
        name: "Ø¹ØµØ±ÙŠ".to_string(),
        description: "Ù†Ù…Ø· Ø¹ØµØ±ÙŠ Ø¬Ø±ÙŠØ¡".to_string(),
        color_scheme: ColorScheme::default(),
        line_settings: LineSettings::default(),
        text_settings: TextSettings::default(),
        special_effects: vec![],
    };
    
    let equations_for_art = [
        "y = sin(x)",
        "y = xÂ²",
        "r = cos(Î¸)",
    ];
    
    let styles = [classic_style, modern_style];
    
    for equation in equations_for_art {
        for style in &styles {
            println!("ğŸ¨ Ø¥Ù†Ø´Ø§Ø¡ ØªØµÙˆØ± ÙÙ†ÙŠ Ù„Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©: {} Ø¨Ø§Ù„Ù†Ù…Ø·: {}", equation, style.name);
            
            match ai.create_artistic_visualization(equation.to_string(), style.clone()) {
                Ok(image) => {
                    println!("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØµÙˆØ± Ø¨Ù†Ø¬Ø§Ø­!");
                    println!("   Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯: {}Ã—{}", image.width, image.height);
                    println!("   Ø§Ù„ØªÙ†Ø³ÙŠÙ‚: {:?}", image.format);
                    println!("   Ø§Ù„ÙˆØµÙ: {}", image.description);
                },
                Err(error) => println!("âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØµÙˆØ±: {}", error),
            }
        }
    }
    
    // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø¨Ø³Ø·Ø©
    println!("\nğŸ¯ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØµÙˆØ± Ø§Ù„Ù…Ø¨Ø³Ø·:");
    match visualize("y = cos(x)".to_string()) {
        Ok(image) => println!("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ØªØµÙˆØ±: {}Ã—{}", image.width, image.height),
        Err(error) => println!("âŒ Ø®Ø·Ø£: {}", error),
    }
}

/// Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø§Ù„ØªÙƒÙŠÙÙŠØ©
fn test_adaptive_equations() {
    println!("\nğŸ§  Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø§Ù„ØªÙƒÙŠÙÙŠØ©...");
    
    let mut ai = create_math_ai();
    
    // Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¯Ø±ÙŠØ¨
    let training_data = TrainingData {
        inputs: vec![
            vec![1.0, 1.0],
            vec![2.0, 2.0],
            vec![3.0, 3.0],
            vec![4.0, 4.0],
            vec![5.0, 5.0],
        ],
        expected_outputs: vec![
            vec![2.0],
            vec![4.0],
            vec![6.0],
            vec![8.0],
            vec![10.0],
        ],
        sample_weights: vec![1.0, 1.0, 1.0, 1.0, 1.0],
        metadata: Dict::new(),
        data_quality: DataQuality {
            completeness: 1.0,
            accuracy: 0.95,
            consistency: 0.98,
            freshness: 1.0,
            diversity: 0.8,
        },
    };
    
    println!("ğŸ” ØªØ¯Ø±ÙŠØ¨ Ù…Ø¹Ø§Ø¯Ù„Ø© ØªÙƒÙŠÙÙŠØ©...");
    match ai.train_adaptive_equation("linear_model".to_string(), training_data) {
        Ok(result) => {
            println!("âœ… ØªÙ… Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø¨Ù†Ø¬Ø§Ø­!");
            println!("   Ù†Ø¬Ø­ Ø§Ù„ØªÙƒÙŠÙ: {}", result.success);
            println!("   ØªØ­Ø³Ù† Ø§Ù„Ø£Ø¯Ø§Ø¡: {:.2}%", result.performance_improvement * 100.0);
            println!("   Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª: {}", result.iterations_required);
            println!("   Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: {} Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©", result.time_taken);
        },
        Err(error) => println!("âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªØ¯Ø±ÙŠØ¨: {}", error),
    }
}

/// Ø§Ø®ØªØ¨Ø§Ø± Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø¹Ø±ÙØ©
fn test_knowledge_base() {
    println!("\nğŸ“š Ø§Ø®ØªØ¨Ø§Ø± Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø¹Ø±ÙØ©...");
    
    let mut ai = create_math_ai();
    
    // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø±ÙØ© Ø¬Ø¯ÙŠØ¯Ø©
    let knowledge_items = [
        KnowledgeItem {
            item_type: KnowledgeItemType::Fact,
            content: "Ï€ â‰ˆ 3.14159".to_string(),
            keywords: vec!["Ï€".to_string(), "pi".to_string(), "Ø«Ø§Ø¨Øª".to_string()],
            domain: "Ø§Ù„Ù‡Ù†Ø¯Ø³Ø©".to_string(),
            importance: 10,
        },
        KnowledgeItem {
            item_type: KnowledgeItemType::Theorem,
            content: "Ù†Ø¸Ø±ÙŠØ© ÙÙŠØ«Ø§ØºÙˆØ±Ø³: aÂ² + bÂ² = cÂ²".to_string(),
            keywords: vec!["ÙÙŠØ«Ø§ØºÙˆØ±Ø³".to_string(), "Ù…Ø«Ù„Ø«".to_string(), "Ù‚Ø§Ø¦Ù…".to_string()],
            domain: "Ø§Ù„Ù‡Ù†Ø¯Ø³Ø©".to_string(),
            importance: 9,
        },
        KnowledgeItem {
            item_type: KnowledgeItemType::Rule,
            content: "Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¶Ø±Ø¨: (a + b)(c + d) = ac + ad + bc + bd".to_string(),
            keywords: vec!["Ø¶Ø±Ø¨".to_string(), "ØªÙˆØ²ÙŠØ¹".to_string(), "Ø¬Ø¨Ø±".to_string()],
            domain: "Ø§Ù„Ø¬Ø¨Ø±".to_string(),
            importance: 8,
        },
    ];
    
    for item in knowledge_items {
        println!("ğŸ“ Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± Ù…Ø¹Ø±ÙØ©: {}", item.content);
        match ai.add_knowledge(item) {
            Ok(()) => println!("âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù†ØµØ± Ø¨Ù†Ø¬Ø§Ø­"),
            Err(error) => println!("âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø¥Ø¶Ø§ÙØ©: {}", error),
        }
    }
    
    // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø¹Ø±ÙØ©
    let search_queries = [
        "Ï€",
        "ÙÙŠØ«Ø§ØºÙˆØ±Ø³",
        "Ø¶Ø±Ø¨",
        "Ù‡Ù†Ø¯Ø³Ø©",
    ];
    
    for query in search_queries {
        println!("ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†: {}", query);
        match ai.search_knowledge(query.to_string()) {
            Ok(results) => {
                println!("âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ {} Ù†ØªÙŠØ¬Ø©", results.len());
                for result in results {
                    println!("   - {}", result.content);
                }
            },
            Err(error) => println!("âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø¨Ø­Ø«: {}", error),
        }
    }
}

/// Ø§Ø®ØªØ¨Ø§Ø± ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø¯Ø§Ø¡
fn test_performance_evaluation() {
    println!("\nğŸ“Š Ø§Ø®ØªØ¨Ø§Ø± ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø¯Ø§Ø¡...");
    
    let ai = create_math_ai();
    
    // ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù…
    let performance_report = ai.evaluate_performance();
    println!("ğŸ“ˆ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø¡:");
    println!("   Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©: {:.2}", performance_report.overall_score);
    println!("   Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø­Ù„ÙˆÙ„Ø©: {}", performance_report.detailed_metrics.problems_solved);
    println!("   Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„Ø­Ù„: {:.2} Ø«Ø§Ù†ÙŠØ©", performance_report.detailed_metrics.average_solve_time);
    println!("   Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­: {:.2}%", performance_report.detailed_metrics.success_rate * 100.0);
    
    // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…ÙØµÙ„Ø©
    let detailed_stats = ai.get_detailed_statistics();
    println!("\nğŸ“‹ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…ÙØµÙ„Ø©:");
    println!("   Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°Ø§ÙƒØ±Ø©: {:.2} MB", detailed_stats.memory_usage);
    println!("   Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬: {:.2}%", detailed_stats.cpu_usage);
    println!("   Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©: {}", detailed_stats.active_processes);
    
    // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø¯Ù…Ø¬Ø©
    println!("\nğŸ§ª ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø¯Ù…Ø¬Ø©:");
    let test_results = tests::run_all_tests();
    println!("   Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø¸Ø§Ù…: {}", if test_results.system_creation { "âœ…" } else { "âŒ" });
    println!("   Ø§Ù„Ø­Ù„ Ø§Ù„Ø¨Ø³ÙŠØ·: {}", if test_results.simple_solving { "âœ…" } else { "âŒ" });
    println!("   ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª: {}", if test_results.equation_analysis { "âœ…" } else { "âŒ" });
    println!("   ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£Ø´ÙƒØ§Ù„: {}", if test_results.shape_conversion { "âœ…" } else { "âŒ" });
    println!("   Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­: {:.1}%", test_results.success_rate() * 100.0);
    
    if test_results.all_passed() {
        println!("ğŸŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù†Ø¬Ø­Øª!");
    } else {
        println!("âš ï¸  Ø¨Ø¹Ø¶ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙØ´Ù„Øª - ÙŠØ­ØªØ§Ø¬ ØªØ­Ø³ÙŠÙ†");
    }
}
